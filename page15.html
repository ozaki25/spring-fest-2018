<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>500+のサーバーで動くLINE Ads PlatformをささえるSpring | Spring Fest 2018</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/spring-fest-2018/assets/css/styles.09634a89.css" as="style"><link rel="preload" href="/spring-fest-2018/assets/js/app.09634a89.js" as="script"><link rel="preload" href="/spring-fest-2018/assets/js/10.febcc01a.js" as="script"><link rel="prefetch" href="/spring-fest-2018/assets/css/1.styles.8eb308c1.css"><link rel="prefetch" href="/spring-fest-2018/assets/css/2.styles.a2bd3099.css"><link rel="prefetch" href="/spring-fest-2018/assets/js/1.8eb308c1.js"><link rel="prefetch" href="/spring-fest-2018/assets/js/11.1cd7b66f.js"><link rel="prefetch" href="/spring-fest-2018/assets/js/12.1f19ecf6.js"><link rel="prefetch" href="/spring-fest-2018/assets/js/13.8b9c0905.js"><link rel="prefetch" href="/spring-fest-2018/assets/js/14.c645b9f5.js"><link rel="prefetch" href="/spring-fest-2018/assets/js/15.38065252.js"><link rel="prefetch" href="/spring-fest-2018/assets/js/16.3e425ef2.js"><link rel="prefetch" href="/spring-fest-2018/assets/js/17.fae3e6e8.js"><link rel="prefetch" href="/spring-fest-2018/assets/js/18.ffb2b096.js"><link rel="prefetch" href="/spring-fest-2018/assets/js/19.790c48e6.js"><link rel="prefetch" href="/spring-fest-2018/assets/js/2.a2bd3099.js"><link rel="prefetch" href="/spring-fest-2018/assets/js/20.c2857ee8.js"><link rel="prefetch" href="/spring-fest-2018/assets/js/21.1daad431.js"><link rel="prefetch" href="/spring-fest-2018/assets/js/22.87665903.js"><link rel="prefetch" href="/spring-fest-2018/assets/js/23.93c086fc.js"><link rel="prefetch" href="/spring-fest-2018/assets/js/24.51308b9b.js"><link rel="prefetch" href="/spring-fest-2018/assets/js/25.4266236e.js"><link rel="prefetch" href="/spring-fest-2018/assets/js/26.99ce27f6.js"><link rel="prefetch" href="/spring-fest-2018/assets/js/27.9ac45d54.js"><link rel="prefetch" href="/spring-fest-2018/assets/js/3.9378e134.js"><link rel="prefetch" href="/spring-fest-2018/assets/js/4.5c19490d.js"><link rel="prefetch" href="/spring-fest-2018/assets/js/5.ca23a0c0.js"><link rel="prefetch" href="/spring-fest-2018/assets/js/6.d229d9ff.js"><link rel="prefetch" href="/spring-fest-2018/assets/js/7.cdcc80d9.js"><link rel="prefetch" href="/spring-fest-2018/assets/js/8.eac14a68.js"><link rel="prefetch" href="/spring-fest-2018/assets/js/9.5d5663db.js">
    <link rel="stylesheet" href="/spring-fest-2018/assets/css/1.styles.8eb308c1.css"><link rel="stylesheet" href="/spring-fest-2018/assets/css/2.styles.a2bd3099.css"><link rel="stylesheet" href="/spring-fest-2018/assets/css/styles.09634a89.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/spring-fest-2018/" class="home-link router-link-active"><!----> <span class="site-name">Spring Fest 2018</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><!---->  <ul class="sidebar-links"><li><div class="sidebar-group first collapsable"><p class="sidebar-heading"><span>10:00〜10:45</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>11:00〜11:45</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>13:15〜14:00</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>14:15〜15:00</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>15:30〜16:15</span> <span class="arrow down"></span></p> <ul class="sidebar-group-items"><li><a href="/spring-fest-2018/page14.html" class="sidebar-link">Pivotal認定講師が解説！基礎からのOAuth2.0とSpring Security5.1による実装</a></li><li><a href="/spring-fest-2018/page15.html" class="active sidebar-link">500+のサーバーで動くLINE Ads PlatformをささえるSpring</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/spring-fest-2018/page15.html#lineのads-platform" class="sidebar-link">LINEのAds Platform</a></li><li class="sidebar-sub-header"><a href="/spring-fest-2018/page15.html#spring-in-line-ads-platform" class="sidebar-link">Spring in LINE Ads Platform</a></li><li class="sidebar-sub-header"><a href="/spring-fest-2018/page15.html#lineの技術トレンド" class="sidebar-link">LINEの技術トレンド</a></li><li class="sidebar-sub-header"><a href="/spring-fest-2018/page15.html#lineの開発体制" class="sidebar-link">LINEの開発体制</a></li><li class="sidebar-sub-header"><a href="/spring-fest-2018/page15.html#今後" class="sidebar-link">今後</a></li></ul></li><li><a href="/spring-fest-2018/page16.html" class="sidebar-link">SpringTools4の機能とその実装</a></li><li><a href="/spring-fest-2018/page17.html" class="sidebar-link">Spring5でSpring Testのここが変わる</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>16:30〜17:15</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>17:30〜18:15</span> <span class="arrow right"></span></p> <!----></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="_500-のサーバーで動くline-ads-platformをささえるspring"><a href="#_500-のサーバーで動くline-ads-platformをささえるspring" aria-hidden="true" class="header-anchor">#</a> 500+のサーバーで動くLINE Ads PlatformをささえるSpring</h1> <ul><li>渡邉 直樹(LINE株式会社)</li></ul> <iframe src="//www.slideshare.net/slideshow/embed_code/key/6QRY7mi2NiD4XE" width="595" height="485" frameborder="0" marginwidth="0" marginheight="0" scrolling="no" allowfullscreen="allowfullscreen" style="border:1px solid #CCC; border-width:1px; margin-bottom:5px; max-width: 100%;"></iframe> <div style="margin-bottom:5px"><strong><a href="//www.slideshare.net/linecorp/500-line-ads-platformspring" title="500+のサーバーで動く LINE Ads PlatformをささえるSpring" target="_blank">500+のサーバーで動く LINE Ads PlatformをささえるSpring</a></strong> from <strong><a href="https://www.slideshare.net/linecorp" target="_blank">LINE Corporation</a></strong></div> <h2 id="lineのads-platform"><a href="#lineのads-platform" aria-hidden="true" class="header-anchor">#</a> LINEのAds Platform</h2> <ul><li>LINEの中に出てる広告
<ul><li>LINE NEWSとかLINE Blogとか</li></ul></li> <li>LINEに広告配信できる唯一のPlatform</li> <li>MAU7800万人</li> <li>運用型広告
<ul><li>リアルタイムに予算やターゲットを変更できる</li> <li>何を表示するかリアルタイムにオークションにかけて選んでる
<ul><li>全て50ms以内にやらないといけない</li></ul></li></ul></li> <li>Real Time Bidding</li> <li>関係者のニーズを満たす必要がある
<ul><li>Advertiser
<ul><li>ROI</li></ul></li> <li>Media
<ul><li>利益</li></ul></li> <li>Audience
<ul><li>UX</li></ul></li></ul></li> <li>指標
<ul><li>CTR(Click Through Rate)
<ul><li>簡単な数式</li></ul></li> <li>CTRを機械学習で事前に予測する</li></ul></li></ul> <h2 id="spring-in-line-ads-platform"><a href="#spring-in-line-ads-platform" aria-hidden="true" class="header-anchor">#</a> Spring in LINE Ads Platform</h2> <h3 id="ssp-supply-side-platform"><a href="#ssp-supply-side-platform" aria-hidden="true" class="header-anchor">#</a> SSP(Supply Side Platform)</h3> <ul><li>メディア側の情報を管理するプラットフォーム
<ul><li>Real Time Bidding
<ul><li>リアルタイムにオークションする</li></ul></li></ul></li> <li>Spring Boot2</li> <li>CMS側はサーバがKotlinクライアントがNuxt</li></ul> <h3 id="dsp-demand-side-platform"><a href="#dsp-demand-side-platform" aria-hidden="true" class="header-anchor">#</a> DSP(Demand Side Platform)</h3> <ul><li>ROIが最大化する広告を選ぶ役割</li> <li>50ms以内に返さないと広告が表示されない</li> <li>Goで作ってる
<ul><li>50ms満たすため</li></ul></li> <li>G1GCでも数十msかかることある</li> <li>CMS側はサーバがSpringBootクライアントがReact</li></ul> <h3 id="データの持ち方"><a href="#データの持ち方" aria-hidden="true" class="header-anchor">#</a> データの持ち方</h3> <ul><li>広告情報をMySQLに入れてる
<ul><li>毎回取りに行くと50msこえちゃう</li> <li>基本はメモリに乗せておく
<ul><li>乗らないようなものはRedis</li></ul></li></ul></li></ul> <h3 id="dmp-data-management-platform"><a href="#dmp-data-management-platform" aria-hidden="true" class="header-anchor">#</a> DMP(Data Management Platform)</h3> <ul><li>広告配信する対象を管理する</li> <li>広告を出す相手の情報があるとより効果的な広告を選べる</li> <li>Look-a-like
<ul><li>似ているユーザの行動をもとに広告を出す</li></ul></li> <li>技術
<ul><li>SpringBoot</li> <li>Kafka</li> <li>HBase</li> <li>Redis</li></ul></li> <li>ユーザの操作の度にイベントを飛ばしてそれを受けたらKafkaに書き込む</li></ul> <h3 id="data-pipeline-analytics-cluster"><a href="#data-pipeline-analytics-cluster" aria-hidden="true" class="header-anchor">#</a> Data Pipeline/Analytics Cluster</h3> <ul><li>広告配信に関わるデータを収集し格納するプラットフォーム</li> <li>hadoopクラスタ</li> <li>Erasticsearch, kibana</li></ul> <h2 id="lineの技術トレンド"><a href="#lineの技術トレンド" aria-hidden="true" class="header-anchor">#</a> LINEの技術トレンド</h2> <h3 id="kafka"><a href="#kafka" aria-hidden="true" class="header-anchor">#</a> Kafka</h3> <ul><li>高速で安定したStreaming Platform</li> <li>queueやjob schedulerとしても利用</li> <li>各サービスはKafkaに書き込むまでが責務</li> <li>一度書き込んでおけば誰でも取れる</li> <li>spring-kafkaあるけど公式のkafka_clientおすすめ
<ul><li>springの方は自由にバージョン変えられない</li></ul></li></ul> <h3 id="springboot2"><a href="#springboot2" aria-hidden="true" class="header-anchor">#</a> SpringBoot2</h3> <ul><li>Reactor
<ul><li>Reactive Streams</li> <li>Non-blocking</li> <li>back pressure
<ul><li>Kafka使ってるからあんまり使ってない</li></ul></li> <li>Lettuce5
<ul><li>Reactive API</li></ul></li></ul></li> <li>kafka</li> <li>actuator + micrometer
<ul><li>使いやすい</li> <li>それまではprometeusにデータ入れてGrafanaで見てた</li></ul></li></ul> <h2 id="lineの開発体制"><a href="#lineの開発体制" aria-hidden="true" class="header-anchor">#</a> LINEの開発体制</h2> <ul><li>データ
<ul><li>2 Country
<ul><li>日本と韓国</li></ul></li> <li>60 Developer</li> <li>100 Co-worker</li></ul></li> <li>コミュニケーション
<ul><li>通訳挟んでTV会議</li> <li>翻訳bot入れてLINEで</li> <li>気軽に出張も</li></ul></li></ul> <h2 id="今後"><a href="#今後" aria-hidden="true" class="header-anchor">#</a> 今後</h2> <ul><li>機械学習とか</li> <li>ARとか</li></ul></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/spring-fest-2018/page14.html" class="prev">
          Pivotal認定講師が解説！基礎からのOAuth2.0とSpring Security5.1による実装
        </a></span> <span class="next"><a href="/spring-fest-2018/page16.html">
          SpringTools4の機能とその実装
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/spring-fest-2018/assets/js/10.febcc01a.js" defer></script><script src="/spring-fest-2018/assets/js/app.09634a89.js" defer></script>
  </body>
</html>
